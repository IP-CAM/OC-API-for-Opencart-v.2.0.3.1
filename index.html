<!DOCTYPE html>
<html ng-app="myApp" ng-controller="customersCtrl">
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
		<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <script src="angular.min.js"></script>

<!-- //For-Mobile-Apps -->
<!-- Style --> <link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
        <title>Hello World</title>
    </head>
    <body>
        <div class="container">
<h1>USER ICON LOGIN FORM</h1>
     <div class="contact-form">
	 <div class="signin">
     <form>
	      <input type="text" class="user" value="Username" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'Username';}" ng-model="username"/>
		  <input type="password" class="pass" value="Password" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'Password';}" ng-model="password"/>
		  <p><a href="#">Forgot Password?</a></p>
     </form>
	 </div>
	      <input type="submit" ng-click="login()" value="Login" />
	 </div>
   <!-- test api list product
   <ul>
      <li ng-repeat="x in products">
        {{ x.name + ', ' + x.price }}
      </li>
  </ul>-->
</div>
<div class="footer">
     <p>Copyright &copy; 2015 User Icon Login Form. All Rights Reserved | Design by <a href="#">Krendi Developers</a></p>
</div>
<h1>{{pesan}}</h1>
<script>
  var app = angular.module('myApp', []);
  app.controller('customersCtrl', function($scope, $http) {
    var req = {
               method: 'POST',
               url: 'http://localhost/opencart/index.php?route=api/login/',
                   transformRequest: function(obj) {
                    var str = [];
                    for(var p in obj)
                    str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
                    return str.join("&");
                },
               data: {
                        username: 'mlvhagiSJ1GI2zRDNJZeOEVZhQbTO9fJ454YnUfAC3lcL1Ftq5QQnT9Emumjtc9v',
                        password: 'gkNYOM5Dcr2CUDaIsib6DHpsHBOsaAHBoXXlqjJ60tACaL3A2zGEBWck4XOAlvq6kutUHevNnfP7vXAV4QraR7oGevOEt4qHaOUHrXuxjSgsEc2mROXJpwr8CELNDx3xa3NZQZfkwpIM84TRjyvldkJcPBqFsECuPkBAHlfQUcjpZ2iYZoUe1sytczXfpFNbZOdyOIGc47eYzMisa3XLqFUuDDdvmxunEga1l2iN8d4RB0PzriwXcPsQFlqBZnKV'
                      },
              headers: {'Content-Type': 'application/x-www-form-urlencoded'}
              }
      $http(req).success(function(response) {$scope.pesan = response.success;});

      //$http.get("http://localhost/opencart/index.php?route=api/product/").success(function(response) {$scope.products = response.products;});

      $scope.login = function() {
        var login = {
                   method: 'POST',
                   url: 'http://localhost/opencart/index.php?route=api/login/login',
                       transformRequest: function(obj) {
                        var str = [];
                        for(var p in obj)
                        str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
                        return str.join("&");
                    },
                   data: {
                            username: $scope.username,
                            password: $scope.password
                          },
                  headers: {'Content-Type': 'application/x-www-form-urlencoded'}
                  }
          $http(login).success(function(response) {$scope.pesan = response.message;});
      };
      $scope.login();
  });
</script>
        <!--<script type="text/javascript" src="cordova.js"></script>-->
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
    </body>
</html>
